CLASS zsodogan_custentity_generator DEFINITION
  PUBLIC
  FINAL
  CREATE PUBLIC .

  PUBLIC SECTION.
    TYPES:
      tt_agencies TYPE STANDARD TABLE OF zsodogan_agency WITH DEFAULT KEY,
      tt_travels  TYPE STANDARD TABLE OF zsodogan_travel WITH DEFAULT KEY,
      tt_bookings  TYPE STANDARD TABLE OF zsodogan_booking WITH DEFAULT KEY.

    INTERFACES if_oo_adt_classrun .
  PROTECTED SECTION.
  PRIVATE SECTION.
ENDCLASS.



CLASS zsodogan_custentity_generator IMPLEMENTATION.


  METHOD if_oo_adt_classrun~main.

**First clear the data.

    DELETE FROM zsodogan_agency.
    DELETE FROM zsodogan_travel.

**Need to insert data for Agency then to Travel
    DATA(lt_agencies) =    VALUE tt_agencies(
    ( agency_id = 10   name = |Sunshine Travel|  street = |134 West Street| postal_code = |54323|  city = |Rochester|  country_code = |US|
     phone_number = |+1 901-632-5620|  email_address = |info@sunshine-travel.sap| web_address = |http://www.sunshine-travel.sap|
    )

    ).


    INSERT  zsodogan_agency FROM TABLE @lt_agencies.


    GET TIME STAMP FIELD  DATA(lv_timestamp).
**Need to insert data for Agency then to Travel
    DATA(lt_travels) =    VALUE tt_travels(
    ( travel_id = 1 agency_id = 10 customer_id = 200  begin_date = cl_abap_context_info=>get_system_date( )
      end_date = cl_abap_context_info=>get_system_date(  ) booking_fee = 12 total_price =  2300
      currency_code = |US| status = |P| last_changed_at = lv_timestamp
    )
        ).



    INSERT  zsodogan_travel FROM TABLE @lt_travels.



    DATA(lt_bookings) =    VALUE tt_bookings(
    ( travel_id = 1 booking_id = 100    currency_code = |EURO|
     flight_date = cl_abap_context_info=>get_system_date( )
     flight_price = 123
     booking_date = cl_abap_context_info=>get_system_date( )
     last_changed_at = lv_timestamp
    )

    ( travel_id = 1 booking_id = 200    currency_code = |US|
     flight_date = cl_abap_context_info=>get_system_date( )
     flight_price = 23
     booking_date = cl_abap_context_info=>get_system_date( )
     last_changed_at = lv_timestamp
    )

    ).

    INSERT  zsodogan_booking FROM TABLE @lt_bookings.

    out->write( |Inserted 1 record successfully| ).


  ENDMETHOD.
ENDCLASS.